<template name="profile">
{{#if Template.subscriptionsReady}}
    {{#with userProfileData}}

    {{! Top Profile functionalty}}

        {{! Cover image functionalty}}

        <div id="profile-cover-image" class="{{#if coverEdit}} profile-cover-image-on {{/if}}" style="background-image: url({{profile.cover}}); background-position-y: {{profile.cover_position}}px">

        {{#if profileEdit}}
            <div id="profile-edit-cover" class="opacity">

                {{#unless coverEdit}}
                    <div class="profileEditBlock">
                        <i class="rocket icon"></i>
                            <span>Edit cover image</span>
                    </div>
                {{/unless}}

                {{#if coverEdit}}
                    <div id="profile-edit-cover">
                        <div class="cover-upload-button">
                            <input id="CoverUpload" type="file" />
                            <label for="CoverUpload" class="ui button coverUploadButton">{{_ "changeCoverImage"}}</label>
                        </div>
                    </div>
                {{/if}}

            </div>

            {{#if coverEdit}}
                <div class="cover-upload-bar">

                        <div class="ui tiny button cancelCoverEdit">
                            <i class="edit icon"></i>
                            {{_ "cancel"}}
                        </div>

                        <div class="ui blue tiny button finishCoverEdit">
                            <i class="edit icon"></i>
                            {{_ "ok"}}
                        </div>

                </div>
            {{/if}}

        {{/if}}

        </div>

        {{! Cover image functionalty ENDS}}


        <div class="ui container">

            <div class="left-profile">

                <div class="profile-avatar-warp">
                    <div class="user-profile-avatar user-edit-avatar" style="background-image:url({{profile.avatar}});background-size: 100% 100%;">
                    </div>
                    <span class="user-status {{#if userIsOnline}} online {{/if}}"></span>
                </div>

                <div class="profile-left-content">
                    <div class="profile-about-me">{{profile.about}}</div>
                </div>

            </div>


            <div class="top-profile">
                <span class="profile-usernmae capitalize">@{{username}}</span>

                {{#if userProfile}}
                    <div class="user-profile-top-buttons">

                        {{#if profileEdit}}
                            <div class="ui blue button finishEditProfile">
                                Finish editing
                            </div>

                        {{else}}

                            <a class="ui button" href="/settings">
                                {{_ "settings"}}
                            </a>


                            <div class="ui button profileEdit">
                                {{_ "edit"}}
                            </div>
                        {{/if}}
                    </div>
                {{/if}}
            </div>

        {{! Top Profile functionalty ENDS}}

        <div class="center-profile">

                <div class="ui secondary pointing menu">
                    <a class="profile-posts item active">
                        Posts
                    </a>
                    <a class="profile-following item">
                        Following
                    </a>
                    <a class="profile-followers item">
                        Followers
                    </a>
                </div>

            {{#if currentIsPosts}}
                {{#each posts}}
                    {{>post}}
                {{/each}}
            {{/if}}


        {{#if currentIsFollowing}}
            following list
        {{/if}}



        {{#if currentIsFollowers}}
            followers list
        {{/if}}
        </div>

                    <h2 class="ui center profile-header">
                        <!--if its the profile of the viewing user-->
                    </h2>

                    <!--if its NOT the profile of the viewing user-->
                    {{#if currentUser}}
                        {{#unless userProfile}}
                            {{#if isUserFollowing}}
                                <div class="user-profile-buttons">
                                    <button class="ui red button" id="unfollow-user">
                                        <i class="user icon"></i>
                                        {{_ "unfollow"}}
                                    </button>
                                </div>
                            {{else}}
                                <div class="user-profile-buttons">
                                    <button class="ui green button" id="follow-user">
                                        <i class="user icon"></i>
                                        {{_ "follow"}}
                                    </button>
                                </div>
                            {{/if}}
                        {{/unless}}
                    {{/if}}

                    <div class="ui center profile-header">
                        <div class="seven wide column centered">


                            <a class="ui label fireFollowersModal">
                                {{_ "followers"}}
                                <div class="detail">{{followersCount}}</div>
                            </a>


                            <a class="ui label fireFollowingModal">
                                {{_ "following"}}
                                <div class="detail">{{followingCount}}</div>
                            </a>

                        </div>
                    </div>
    </div>

    {{/with}}




{{else}}

    {{>loader}}

{{/if}}


</template>




















<!-- <div class="ui tiny followers modal">
    <i class="close icon"></i>
    <div class="header">
        {{username}} {{_ "followers"}}
    </div>

    <div class="ui middle aligned selection list">
        {{#each followersData}}
            <div class="item">
                <img class="ui avatar image" src="{{profile.avatar}}">
                <div class="content">
                    <div class="header">{{username}}</div>
                </div>
            </div>
        {{/each}}
    </div>
    <div class="actions">
        <div class="ui cancel button">{{_ "close"}}</div>
    </div>
</div>




<div class="ui tiny following modal">
    <i class="close icon"></i>
    <div class="header">
        {{username}} {{_ "following"}}
    </div>

    <div class="ui middle aligned selection list">
        {{#each followsData}}
            <div class="item">
                <img class="ui avatar image" src="{{profile.avatar}}">
                <div class="content">
                    <div class="header">{{username}}</div>
                </div>
            </div>
        {{/each}}
    </div>

    <div class="actions">
        <div class="ui cancel button">{{_ "close"}}</div>
    </div>
</div> -->
